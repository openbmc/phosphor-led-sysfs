{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4630df1e_50e7b387",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 34
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-02-02T05:29:41Z",
      "side": 1,
      "message": "I\u0027m doing some testing of this series on some of the p10bmc machines. I\u0027ll leave some comments when I have results.",
      "revId": "04a39b6dd387e7dd95c3ab96d068c84aa3b5ff7d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9891759d_dfae1fd2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 34
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-02-02T05:45:45Z",
      "side": 1,
      "message": "So with some minor changes I\u0027m getting this:\n\n```\nFeb 01 23:34:25 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/bmcx2dingraham0\nFeb 01 23:34:26 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/cffps2x2d68\nFeb 01 23:34:26 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/cffps2x2d69\nFeb 01 23:34:26 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pca955x:basex2dblyth\nFeb 01 23:34:26 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pca955x:cpu0x2dvrm0\nFeb 01 23:34:26 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pca955x:cpux2dvrm1\nFeb 01 23:34:26 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pca955x:dasdx2dpyramid0\nFeb 01 23:34:26 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pca955x:dasdx2dpyramid1\nFeb 01 23:34:26 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pca955x:dasdx2dpyramid2\nFeb 01 23:34:28 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pca955x:frontx2dcheckx2dlog0\nFeb 01 23:34:28 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pca955x:frontx2dencx2dfault1\nFeb 01 23:34:28 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pca955x:frontx2dsysx2did0\nFeb 01 23:34:28 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pca955x:frontx2dsysx2dpwron0\nFeb 01 23:34:28 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pca955x:lcdx2drussel\nFeb 01 23:34:29 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pca955x:rtcx2dbattery\nFeb 01 23:34:29 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pca955x:tpmx2dwilson\nFeb 01 23:34:29 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/pcieslotx2dpower\nFeb 01 23:34:29 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/rearx2dencx2dfault0\nFeb 01 23:34:30 bmc phosphor-ledcontroller[414]: No such directory /sys/class/leds/rearx2dencx2did0\n```\n\nSo I\u0027ll need to keep poking at it.",
      "revId": "04a39b6dd387e7dd95c3ab96d068c84aa3b5ff7d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9aadf4c_dd6ce68c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 34
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-02-03T05:05:13Z",
      "side": 1,
      "message": "I\u0027ve got DBus-activation going for this series now and it helps a bit, however we need to fix up some name mangling that\u0027s occurring, e.g:\n\n```\nroot@p10bmc:~# busctl tree xyz.openbmc_project.LED.Controller | grep -F \u0027/_\u0027\n        |-/xyz/openbmc_project/led/physical/_62mc_2dingraham0\n        |-/xyz/openbmc_project/led/physical/_70ca955x_5fcablecard10_2dcxp_2dbot\n        |-/xyz/openbmc_project/led/physical/_70ca955x_5fcablecard10_2dcxp_2dtop\n        |-/xyz/openbmc_project/led/physical/_70cieslot_2dpower\n        |-/xyz/openbmc_project/led/physical/_72ear_2denc_2dfault0\n        |-/xyz/openbmc_project/led/physical/_72ear_2denc_2did0\n```\n\nIn the process of testing this series I also discovered the existence of \"virtual LEDs\". They are implemented by passing non-existent paths in sysfs as a commandline argument to phosphor-ledcontroller, which hosts DBus objects whose operations cannot possibly work. This approach, quite frankly, is entirely unjustifiable, however we will need to unwind it to maintain the necessary behaviour.\n\n```\n2 15:06:54 andrew@mistburn:~/src/openbmc/openbmc/build/p10bmc  $ git grep sys-class-leds-virtual ../..\n../../meta-ibm/recipes-phosphor/leds/phosphor-led-manager_%.bbappend:    LINK_FAULT\u003d\"$D$systemd_system_unitdir/multi-user.target.wants/obmc-led-create-virtual-leds@sys-class-leds-virtual-enc-fault.service\"\n../../meta-ibm/recipes-phosphor/leds/phosphor-led-manager_%.bbappend:    LINK_ID\u003d\"$D$systemd_system_unitdir/multi-user.target.wants/obmc-led-create-virtual-leds@sys-class-leds-virtual-enc-id.service\"\n../../meta-ibm/recipes-phosphor/leds/phosphor-led-manager_%.bbappend:    LINK_FAULT\u003d\"$D$systemd_system_unitdir/multi-user.target.wants/obmc-led-create-virtual-leds@sys-class-leds-virtual-enc-fault.service\"\n../../meta-ibm/recipes-phosphor/leds/phosphor-led-manager_%.bbappend:    LINK_ID\u003d\"$D$systemd_system_unitdir/multi-user.target.wants/obmc-led-create-virtual-leds@sys-class-leds-virtual-enc-id.service\"\n2 15:26:23 andrew@mistburn:~/src/openbmc/openbmc/build/p10bmc $ git ls-files ../.. | grep obmc-led-create-virtual-leds\n../../meta-ibm/recipes-phosphor/leds/phosphor-led-manager/obmc-led-create-virtual-leds@.service\n2 15:26:40 andrew@mistburn:~/src/openbmc/openbmc/build/p10bmc $ cat ../../meta-ibm/recipes-phosphor/leds/phosphor-led-manager/obmc-led-create-virtual-leds@.service\n[Unit]\nDescription\u003dCreate the virtual physical LEDs\n\n[Service]\nRestart\u003dalways\nExecStart\u003d/usr/libexec/phosphor-led-sysfs/phosphor-ledcontroller -p %f\nSyslogIdentifier\u003dobmc-led-create-virtual-leds\n```",
      "revId": "04a39b6dd387e7dd95c3ab96d068c84aa3b5ff7d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7cc09c0_5809a67a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 34
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-02-03T15:05:02Z",
      "side": 1,
      "message": "\u003e however we need to fix up some name mangling that\u0027s occurring, e.g:\n\nWhat is wrong with the mangling?  This looks like the systemd escape stuff.  We\u0027ve requested everyone move to this manner and if you use the \u0027object_path\u0027 code properly you are getting it for free.\n\n\u003e Description\u003dCreate the virtual physical LEDs\n\nWow.  That stuff is pretty lame.  I wonder why that ever happened considering there are already virtual groups.  I have no idea what a \"virtual physical\" means.\n\nIs there somewhere where the status of these \"virtual physical\" LEDs is being actively monitored?  That\u0027s kind of against the underlying design in that everything was suppose to monitor the LED groups and not physical LEDs directly.",
      "parentUuid": "b9aadf4c_dd6ce68c",
      "revId": "04a39b6dd387e7dd95c3ab96d068c84aa3b5ff7d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4113a9a_9233ba61",
        "filename": "interfaces/internal_interface.cpp",
        "patchSetId": 34
      },
      "lineNbr": 45,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-01-27T17:12:36Z",
      "side": 1,
      "message": "How does the caller know what, if any, of the ledDescr is populated at this point?\n\nIt doesn\u0027t seem like we should blindly ignore this out_of_range.",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 45,
        "endChar": 5
      },
      "revId": "04a39b6dd387e7dd95c3ab96d068c84aa3b5ff7d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "74d8b1ab_b67572e5",
        "filename": "interfaces/internal_interface.cpp",
        "patchSetId": 34
      },
      "lineNbr": 45,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-07-11T16:10:37Z",
      "side": 1,
      "message": "Added an error log here. ```InternalInterface::createLEDPath``` can catch the re-thrown exception and return when the led description fails to be created.",
      "parentUuid": "d4113a9a_9233ba61",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 45,
        "endChar": 5
      },
      "revId": "04a39b6dd387e7dd95c3ab96d068c84aa3b5ff7d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0003c1ed_80fe3d99",
        "filename": "interfaces/internal_interface.cpp",
        "patchSetId": 34
      },
      "lineNbr": 61,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-01-27T17:12:36Z",
      "side": 1,
      "message": "Why are we bothering to make a copy of this string only to overwrite it on line 74?",
      "revId": "04a39b6dd387e7dd95c3ab96d068c84aa3b5ff7d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "812fe3d3_9b616688",
        "filename": "interfaces/internal_interface.cpp",
        "patchSetId": 34
      },
      "lineNbr": 61,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-07-11T16:10:37Z",
      "side": 1,
      "message": "restructured that. Now using ```ledName``` directly where appropriate and creating ```name``` variable for the dbus name stuff later on.",
      "parentUuid": "0003c1ed_80fe3d99",
      "revId": "04a39b6dd387e7dd95c3ab96d068c84aa3b5ff7d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4caa95a0_8c204de1",
        "filename": "interfaces/internal_interface.cpp",
        "patchSetId": 34
      },
      "lineNbr": 62,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-01-27T17:12:36Z",
      "side": 1,
      "message": "nit: probably can reduce the whitespace.",
      "revId": "04a39b6dd387e7dd95c3ab96d068c84aa3b5ff7d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "da9ad8ee_d62dcf74",
        "filename": "interfaces/internal_interface.cpp",
        "patchSetId": 34
      },
      "lineNbr": 62,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2024-07-11T16:10:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4caa95a0_8c204de1",
      "revId": "04a39b6dd387e7dd95c3ab96d068c84aa3b5ff7d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}